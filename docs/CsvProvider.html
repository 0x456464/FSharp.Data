<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>F# Data: CSV Type Provider</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The F# Data library implements type providers for working with structured file formats (CSV, JSON and XML) and for accessing the WorldBank data. It also includes helpers for other data-related tasks.">
    <meta name="author" content="Tomas Petricek">

    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script src="content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/tpetricek/FSharp.Data">github page</a></li>
          <li><a href="http://fsharp.github.com/fsharpx/">fsharpx library</a></li>
        </ul>
        <h3 class="muted">F# Data Library</h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <h1>F# Data: CSV Type Provider</h1>

<p>This article demonstrates how to use the CSV type provider to read CSV files
in a statically typed way. We look how to download stock prices from the Yahoo
Finance web site and then also look how the type provider supports units of measure.
The type provider is based on the same code as the one used on <a href="http://www.tryfsharp.org">Try F#</a>
web site in the "Financial Computing" tutorial, so you can find additional examples there.</p>

<p>The CSV type provider takes a sample CSV file as an input and generates
a type based on the first (header) row. The types are inferred from either the
entire document or from first few rows.</p>

<h2>Introducing the provider</h2>

<p>The type provider is located in the <code>FSharp.Data.dll</code> assembly. Assuming the assembly 
is located in the <code>../bin</code> directory, we can load it in F# Interactive as follows
(to get CSV files from file system and the internet, we also open <code>System.IO</code> and
<code>System.Net</code>):</p>
<pre class="fssnip">
<span class="l">1: </span><span class="prep">#r</span> <span class="s">&quot;</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">bin</span><span class="s">/</span><span class="s">FSharp</span><span class="s">.</span><span class="s">Data</span><span class="s">.</span><span class="s">dll</span><span class="s">&quot;</span>
<span class="l">2: </span><span class="k">open</span> <span onmouseout="hideTip(event, 'fstip1', 1)" onmouseover="showTip(event, 'fstip1', 1)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip2', 2)" onmouseover="showTip(event, 'fstip2', 2)" class="i">IO</span>
<span class="l">3: </span><span class="k">open</span> <span onmouseout="hideTip(event, 'fstip1', 3)" onmouseover="showTip(event, 'fstip1', 3)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip3', 4)" onmouseover="showTip(event, 'fstip3', 4)" class="i">Net</span>
<span class="l">4: </span><span class="k">open</span> <span onmouseout="hideTip(event, 'fstip4', 5)" onmouseover="showTip(event, 'fstip4', 5)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip5', 6)" onmouseover="showTip(event, 'fstip5', 6)" class="i">Data</span></pre>
<h3>Parsing stock prices</h3>

<p>The Yahoo Finance web site provides daily stock prices in a CSV format that has the
following structure (you can find a larger example in the <a href="docs/MSFT.csv"><code>docs/MSFT.csv</code></a> file):</p>

<pre><code>Date,Open,High,Low,Close,Volume,Adj Close
2012-01-27,29.45,29.53,29.17,29.23,44187700,29.23
2012-01-26,29.61,29.70,29.40,29.50,49102800,29.50
2012-01-25,29.07,29.65,29.07,29.56,59231700,29.56
2012-01-24,29.47,29.57,29.18,29.34,51703300,29.34
</code></pre>

<p>As usual with CSV files, the first row contains the headers (names of individial columns) 
and the next rows define the data. We can pass reference to the file to <code>CsvProvider</code> to 
get a strongly typed view of the file:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">type</span> <span onmouseout="hideTip(event, 'fstip6', 7)" onmouseover="showTip(event, 'fstip6', 7)" class="i">Stocks</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip7', 8)" onmouseover="showTip(event, 'fstip7', 8)" class="i">CsvProvider</span><span class="o">&lt;</span><span class="s">&quot;</span><span class="s">docs</span><span class="s">/</span><span class="s">MSFT</span><span class="s">.</span><span class="s">csv</span><span class="s">&quot;</span><span class="o">&gt;</span></pre>
<p>To get the current stock prices from the live web site, we use <code>WebClient</code> to download
the data and then use the <code>Parse</code> method of the generated type to read the CSV data:</p>
<pre class="fssnip">
<span class="l"> 1: </span> 
<span class="l"> 2: </span><span class="c">// Download the stock prices</span>
<span class="l"> 3: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip8', 9)" onmouseover="showTip(event, 'fstip8', 9)" class="i">wc</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fstip9', 10)" onmouseover="showTip(event, 'fstip9', 10)" class="i">WebClient</span>()
<span class="l"> 4: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip10', 11)" onmouseover="showTip(event, 'fstip10', 11)" class="i">data</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip8', 12)" onmouseover="showTip(event, 'fstip8', 12)" class="i">wc</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip11', 13)" onmouseover="showTip(event, 'fstip11', 13)" class="i">DownloadString</span>(<span class="s">&quot;</span><span class="s">http</span><span class="s">:</span><span class="s">/</span><span class="s">/</span><span class="s">ichart</span><span class="s">.</span><span class="s">finance</span><span class="s">.</span><span class="s">yahoo</span><span class="s">.</span><span class="s">com</span><span class="s">/</span><span class="s">table</span><span class="s">.</span><span class="s">csv</span><span class="s">?</span><span class="s">s</span><span class="s">=</span><span class="s">MSFT</span><span class="s">&quot;</span>)
<span class="l"> 5: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip12', 14)" onmouseover="showTip(event, 'fstip12', 14)" class="i">msft</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip6', 15)" onmouseover="showTip(event, 'fstip6', 15)" class="i">Stocks</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip13', 16)" onmouseover="showTip(event, 'fstip13', 16)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fstip10', 17)" onmouseover="showTip(event, 'fstip10', 17)" class="i">data</span>)
<span class="l"> 6: </span>
<span class="l"> 7: </span><span class="c">// Look at the most recent row. Note the &#39;Date&#39; property</span>
<span class="l"> 8: </span><span class="c">// is of type &#39;DateTime&#39; and &#39;Open&#39; has a type &#39;decimal&#39;</span>
<span class="l"> 9: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip14', 18)" onmouseover="showTip(event, 'fstip14', 18)" class="i">firstRow</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip12', 19)" onmouseover="showTip(event, 'fstip12', 19)" class="i">msft</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip15', 20)" onmouseover="showTip(event, 'fstip15', 20)" class="i">Data</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fstip16', 21)" onmouseover="showTip(event, 'fstip16', 21)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip17', 22)" onmouseover="showTip(event, 'fstip17', 22)" class="i">head</span>
<span class="l">10: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip18', 23)" onmouseover="showTip(event, 'fstip18', 23)" class="i">lastDate</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip14', 24)" onmouseover="showTip(event, 'fstip14', 24)" class="i">firstRow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip19', 25)" onmouseover="showTip(event, 'fstip19', 25)" class="i">Date</span>
<span class="l">11: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip20', 26)" onmouseover="showTip(event, 'fstip20', 26)" class="i">lastOpen</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip14', 27)" onmouseover="showTip(event, 'fstip14', 27)" class="i">firstRow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip21', 28)" onmouseover="showTip(event, 'fstip21', 28)" class="i">Open</span>
<span class="l">12: </span>
<span class="l">13: </span><span class="c">// Print the prices in the HLOC format</span>
<span class="l">14: </span><span class="k">for</span> <span onmouseout="hideTip(event, 'fstip22', 29)" onmouseover="showTip(event, 'fstip22', 29)" class="i">row</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fstip12', 30)" onmouseover="showTip(event, 'fstip12', 30)" class="i">msft</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip15', 31)" onmouseover="showTip(event, 'fstip15', 31)" class="i">Data</span> <span class="k">do</span>
<span class="l">15: </span>  <span onmouseout="hideTip(event, 'fstip23', 32)" onmouseover="showTip(event, 'fstip23', 32)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">HLOC</span><span class="s">:</span><span class="s"> </span><span class="s">(</span><span class="s">%</span><span class="s">A</span><span class="s">,</span><span class="s"> </span><span class="s">%</span><span class="s">A</span><span class="s">,</span><span class="s"> </span><span class="s">%</span><span class="s">A</span><span class="s">,</span><span class="s"> </span><span class="s">%</span><span class="s">A</span><span class="s">)</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip22', 33)" onmouseover="showTip(event, 'fstip22', 33)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip24', 34)" onmouseover="showTip(event, 'fstip24', 34)" class="i">High</span> <span onmouseout="hideTip(event, 'fstip22', 35)" onmouseover="showTip(event, 'fstip22', 35)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip25', 36)" onmouseover="showTip(event, 'fstip25', 36)" class="i">Low</span> <span onmouseout="hideTip(event, 'fstip22', 37)" onmouseover="showTip(event, 'fstip22', 37)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip21', 38)" onmouseover="showTip(event, 'fstip21', 38)" class="i">Open</span> <span onmouseout="hideTip(event, 'fstip22', 39)" onmouseover="showTip(event, 'fstip22', 39)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip26', 40)" onmouseover="showTip(event, 'fstip26', 40)" class="i">Close</span></pre>
<p>The generated type has a property <code>Data</code> that returns the data from the CSV file as a
collection of rows. We iterate over the rows using <code>for</code> loop. As you can see the
(generated) type of row has properties such as <code>High</code>, <code>Low</code> and <code>Close</code> that correspond
to the columns in the CSV file.</p>

<p>As you can see, the type provider also infers types of individual rows. The <code>Date</code>
property is infered to be a <code>DateTime</code> (because the values in the sample file can all
be parsed as dates) while HLOC prices are infered as <code>decimal</code>.</p>

<h3>Charting stock prices</h3>

<p>We can use the <code>FSharpChart</code> library to draw a simple line chart showing how the price
of MSFT stocks changes since the company was founded:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="c">// Load the F# chart library</span>
<span class="l">2: </span><span class="prep">#load</span> <span class="s">&quot;</span><span class="s">lib</span><span class="s">/</span><span class="s">FSharpChart</span><span class="s">.</span><span class="s">fsx</span><span class="s">&quot;</span>
<span class="l">3: </span><span class="k">open</span> <span onmouseout="hideTip(event, 'fstip1', 41)" onmouseover="showTip(event, 'fstip1', 41)" class="i">System</span>
<span class="l">4: </span><span class="k">open</span> <span onmouseout="hideTip(event, 'fstip27', 42)" onmouseover="showTip(event, 'fstip27', 42)" class="i">Samples</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip28', 43)" onmouseover="showTip(event, 'fstip28', 43)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip29', 44)" onmouseover="showTip(event, 'fstip29', 44)" class="i">Charting</span>
<span class="l">5: </span>
<span class="l">6: </span><span class="c">// Visualize the stock prices</span>
<span class="l">7: </span>[ <span class="k">for</span> <span onmouseout="hideTip(event, 'fstip22', 45)" onmouseover="showTip(event, 'fstip22', 45)" class="i">row</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fstip12', 46)" onmouseover="showTip(event, 'fstip12', 46)" class="i">msft</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip15', 47)" onmouseover="showTip(event, 'fstip15', 47)" class="i">Data</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fstip22', 48)" onmouseover="showTip(event, 'fstip22', 48)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip30', 49)" onmouseover="showTip(event, 'fstip30', 49)" class="i">Date</span>, <span onmouseout="hideTip(event, 'fstip22', 50)" onmouseover="showTip(event, 'fstip22', 50)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip21', 51)" onmouseover="showTip(event, 'fstip21', 51)" class="i">Open</span> ]
<span class="l">8: </span><span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fstip31', 52)" onmouseover="showTip(event, 'fstip31', 52)" class="i">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip32', 53)" onmouseover="showTip(event, 'fstip32', 53)" class="i">FastLine</span></pre>
<p>As a one more example, we use the <code>Candlestick</code> chart to get a more detailed look at the
data over the last month:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="c">// Get last months&#39; prices in HLOC format </span>
<span class="l">2: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip33', 54)" onmouseover="showTip(event, 'fstip33', 54)" class="i">recent</span> <span class="o">=</span> 
<span class="l">3: </span>  [ <span class="k">for</span> <span onmouseout="hideTip(event, 'fstip22', 55)" onmouseover="showTip(event, 'fstip22', 55)" class="i">row</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fstip12', 56)" onmouseover="showTip(event, 'fstip12', 56)" class="i">msft</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip15', 57)" onmouseover="showTip(event, 'fstip15', 57)" class="i">Data</span> <span class="k">do</span>
<span class="l">4: </span>      <span class="k">if</span> <span onmouseout="hideTip(event, 'fstip22', 58)" onmouseover="showTip(event, 'fstip22', 58)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip30', 59)" onmouseover="showTip(event, 'fstip30', 59)" class="i">Date</span> <span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fstip34', 60)" onmouseover="showTip(event, 'fstip34', 60)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip35', 61)" onmouseover="showTip(event, 'fstip35', 61)" class="i">Now</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip36', 62)" onmouseover="showTip(event, 'fstip36', 62)" class="i">AddDays</span>(<span class="o">-</span><span class="n">30.0</span>) <span class="k">then</span>
<span class="l">5: </span>        <span class="k">yield</span> <span onmouseout="hideTip(event, 'fstip22', 63)" onmouseover="showTip(event, 'fstip22', 63)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip30', 64)" onmouseover="showTip(event, 'fstip30', 64)" class="i">Date</span>, <span onmouseout="hideTip(event, 'fstip22', 65)" onmouseover="showTip(event, 'fstip22', 65)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip24', 66)" onmouseover="showTip(event, 'fstip24', 66)" class="i">High</span>, <span onmouseout="hideTip(event, 'fstip22', 67)" onmouseover="showTip(event, 'fstip22', 67)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip25', 68)" onmouseover="showTip(event, 'fstip25', 68)" class="i">Low</span>, <span onmouseout="hideTip(event, 'fstip22', 69)" onmouseover="showTip(event, 'fstip22', 69)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip21', 70)" onmouseover="showTip(event, 'fstip21', 70)" class="i">Open</span>, <span onmouseout="hideTip(event, 'fstip22', 71)" onmouseover="showTip(event, 'fstip22', 71)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip26', 72)" onmouseover="showTip(event, 'fstip26', 72)" class="i">Close</span> ]
<span class="l">6: </span>
<span class="l">7: </span><span class="c">// Visualize prices using Candlestick chart</span>
<span class="l">8: </span><span onmouseout="hideTip(event, 'fstip31', 73)" onmouseover="showTip(event, 'fstip31', 73)" class="i">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip37', 74)" onmouseover="showTip(event, 'fstip37', 74)" class="i">Candlestick</span>(<span onmouseout="hideTip(event, 'fstip33', 75)" onmouseover="showTip(event, 'fstip33', 75)" class="i">recent</span>)<span class="o">.</span><span class="i">AndYAxis</span>(<span class="i">Max</span> <span class="o">=</span> <span class="n">30.0</span>, <span class="i">Min</span> <span class="o">=</span> <span class="n">25.0</span>)</pre>
<h2>Using units of measure</h2>

<p>Another interesting feature of the CSV type provider is that it supports F# units of measure.
If the header includes the name of one of the standard SI units, then the generated type
returns values annotated with the appropriate unit.</p>

<p>In this section, we use a simple file <a href="docs/SmallTest.csv"><code>docs/SmallTest.csv</code></a> which
looks as follows:</p>

<pre><code>Name,  Distance (metre), Time (second)
First, 50.0,             3.7
</code></pre>

<p>As you can see, the second and third columns are annotated with <code>metre</code> and <code>second</code>,
respectively. To use units of measure in our code, we need to open the namespace with
standard unit names. Then we pass the <code>SmallTest.csv</code> file to the type provider as
a static argument and load the same file (at runtime):</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">open</span> <span onmouseout="hideTip(event, 'fstip38', 76)" onmouseover="showTip(event, 'fstip38', 76)" class="i">Microsoft</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip39', 77)" onmouseover="showTip(event, 'fstip39', 77)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip40', 78)" onmouseover="showTip(event, 'fstip40', 78)" class="i">Data</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip41', 79)" onmouseover="showTip(event, 'fstip41', 79)" class="i">UnitSystems</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip42', 80)" onmouseover="showTip(event, 'fstip42', 80)" class="i">SI</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip43', 81)" onmouseover="showTip(event, 'fstip43', 81)" class="i">UnitNames</span>
<span class="l">2: </span>
<span class="l">3: </span><span class="k">type</span> <span onmouseout="hideTip(event, 'fstip44', 82)" onmouseover="showTip(event, 'fstip44', 82)" class="i">Test</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip7', 83)" onmouseover="showTip(event, 'fstip7', 83)" class="i">CsvProvider</span><span class="o">&lt;</span><span class="s">&quot;</span><span class="s">docs</span><span class="s">/</span><span class="s">SmallTest</span><span class="s">.</span><span class="s">csv</span><span class="s">&quot;</span><span class="o">&gt;</span>
<span class="l">4: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip45', 84)" onmouseover="showTip(event, 'fstip45', 84)" class="i">file</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip46', 85)" onmouseover="showTip(event, 'fstip46', 85)" class="i">Path</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip47', 86)" onmouseover="showTip(event, 'fstip47', 86)" class="i">Combine</span>(<span class="k">__SOURCE_DIRECTORY__</span>, <span class="s">&quot;</span><span class="s">docs</span><span class="s">/</span><span class="s">SmallTest</span><span class="s">.</span><span class="s">csv</span><span class="s">&quot;</span>)
<span class="l">5: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip48', 87)" onmouseover="showTip(event, 'fstip48', 87)" class="i">small</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip44', 88)" onmouseover="showTip(event, 'fstip44', 88)" class="i">Test</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip49', 89)" onmouseover="showTip(event, 'fstip49', 89)" class="i">Load</span>(<span onmouseout="hideTip(event, 'fstip45', 90)" onmouseover="showTip(event, 'fstip45', 90)" class="i">file</span>)</pre>
<p>As in the previous example the <code>small</code> value exposes the rows using the <code>Data</code> property.
The generated properties <code>Distance</code> and <code>Time</code> are now annotated with units. Look at the
following simple calculation:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">for</span> <span onmouseout="hideTip(event, 'fstip22', 91)" onmouseover="showTip(event, 'fstip22', 91)" class="i">row</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fstip48', 92)" onmouseover="showTip(event, 'fstip48', 92)" class="i">small</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip15', 93)" onmouseover="showTip(event, 'fstip15', 93)" class="i">Data</span> <span class="k">do</span>
<span class="l">2: </span>  <span class="k">let</span> <span onmouseout="hideTip(event, 'fstip50', 94)" onmouseover="showTip(event, 'fstip50', 94)" class="i">speed</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip22', 95)" onmouseover="showTip(event, 'fstip22', 95)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip51', 96)" onmouseover="showTip(event, 'fstip51', 96)" class="i">Distance</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fstip22', 97)" onmouseover="showTip(event, 'fstip22', 97)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip52', 98)" onmouseover="showTip(event, 'fstip52', 98)" class="i">Time</span>
<span class="l">3: </span>  <span class="k">if</span> <span onmouseout="hideTip(event, 'fstip50', 99)" onmouseover="showTip(event, 'fstip50', 99)" class="i">speed</span> <span class="o">&gt;</span> <span class="n">15.0M</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fstip53', 100)" onmouseover="showTip(event, 'fstip53', 100)" class="i">meter</span><span class="o">/</span><span onmouseout="hideTip(event, 'fstip54', 101)" onmouseover="showTip(event, 'fstip54', 101)" class="i">second</span><span class="o">&gt;</span> <span class="k">then</span> 
<span class="l">4: </span>    <span onmouseout="hideTip(event, 'fstip23', 102)" onmouseover="showTip(event, 'fstip23', 102)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">s</span><span class="s"> </span><span class="s">(</span><span class="s">%</span><span class="s">A</span><span class="s"> </span><span class="s">m</span><span class="s">/</span><span class="s">s</span><span class="s">)</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip22', 103)" onmouseover="showTip(event, 'fstip22', 103)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip55', 104)" onmouseover="showTip(event, 'fstip55', 104)" class="i">Name</span> <span onmouseout="hideTip(event, 'fstip50', 105)" onmouseover="showTip(event, 'fstip50', 105)" class="i">speed</span></pre>
<p>The numerical values of <code>Distance</code> and <code>Time</code> are both inferred as <code>decimal</code> (because they
are small enough). Thus the type of <code>speed</code> becomes <code>decimal&lt;meter/second&gt;</code>. The compiler
can then statically check that we're not comparing incompatible values - e.g. number in
meters per second against a value in kilometers per hour.</p>

<h2>Related articles</h2>

<ul>
<li><a href="FSharpData.html">F# Data: Type Providers</a> - gives more information about other
type providers in the <code>FSharp.Data</code> package.</li>
</ul>

          <div class="tip" id="fstip1">namespace System</div>
<div class="tip" id="fstip2">namespace System.IO</div>
<div class="tip" id="fstip3">namespace System.Net</div>
<div class="tip" id="fstip4">namespace FSharp</div>
<div class="tip" id="fstip5">namespace FSharp.Data</div>
<div class="tip" id="fstip6">type Stocks = CsvProvider&lt;...&gt;<br /><br />Full name: CsvProvider.Stocks</div>
<div class="tip" id="fstip7">type CsvProvider<br /><br />Full name: FSharp.Data.CsvProvider</div>
<div class="tip" id="fstip8">val wc : WebClient<br /><br />Full name: CsvProvider.wc</div>
<div class="tip" id="fstip9">Multiple items<br />type WebClient =<br />&#160;&#160;inherit Component<br />&#160;&#160;new : unit -&gt; WebClient<br />&#160;&#160;member AllowReadStreamBuffering : bool with get, set<br />&#160;&#160;member AllowWriteStreamBuffering : bool with get, set<br />&#160;&#160;member BaseAddress : string with get, set<br />&#160;&#160;member CachePolicy : RequestCachePolicy with get, set<br />&#160;&#160;member CancelAsync : unit -&gt; unit<br />&#160;&#160;member Credentials : ICredentials with get, set<br />&#160;&#160;member DownloadData : address:string -&gt; byte[] + 1 overload<br />&#160;&#160;member DownloadDataAsync : address:Uri -&gt; unit + 1 overload<br />&#160;&#160;member DownloadDataTaskAsync : address:string -&gt; Task&lt;byte[]&gt; + 1 overload<br />&#160;&#160;...<br /><br />Full name: System.Net.WebClient<br /><br />--------------------<br />WebClient() : unit</div>
<div class="tip" id="fstip10">val data : string<br /><br />Full name: CsvProvider.data</div>
<div class="tip" id="fstip11">WebClient.DownloadString(address: System.Uri) : string<br />WebClient.DownloadString(address: string) : string</div>
<div class="tip" id="fstip12">val msft : CsvProvider&lt;...&gt;<br /><br />Full name: CsvProvider.msft</div>
<div class="tip" id="fstip13">CsvProvider&lt;...&gt;.Parse(source: string) : CsvProvider&lt;...&gt;</div>
<div class="tip" id="fstip14">val firstRow : CsvProvider&lt;...&gt;.DomainTypes.Row<br /><br />Full name: CsvProvider.firstRow</div>
<div class="tip" id="fstip15">property CsvProvider&lt;...&gt;.Data: CsvProvider&lt;...&gt;.DomainTypes.Row []</div>
<div class="tip" id="fstip16">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fstip17">val head : source:seq&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Collections.Seq.head</div>
<div class="tip" id="fstip18">val lastDate : System.DateTime<br /><br />Full name: CsvProvider.lastDate</div>
<div class="tip" id="fstip19">property CsvProvider&lt;...&gt;.DomainTypes.Row.Date: System.DateTime</div>
<div class="tip" id="fstip20">val lastOpen : decimal<br /><br />Full name: CsvProvider.lastOpen</div>
<div class="tip" id="fstip21">property CsvProvider&lt;...&gt;.DomainTypes.Row.Open: decimal</div>
<div class="tip" id="fstip22">val row : CsvProvider&lt;...&gt;.DomainTypes.Row</div>
<div class="tip" id="fstip23">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fstip24">property CsvProvider&lt;...&gt;.DomainTypes.Row.High: decimal</div>
<div class="tip" id="fstip25">property CsvProvider&lt;...&gt;.DomainTypes.Row.Low: decimal</div>
<div class="tip" id="fstip26">property CsvProvider&lt;...&gt;.DomainTypes.Row.Close: decimal</div>
<div class="tip" id="fstip27">namespace Samples</div>
<div class="tip" id="fstip28">namespace Samples.FSharp</div>
<div class="tip" id="fstip29">namespace Samples.FSharp.Charting</div>
<div class="tip" id="fstip30">property CsvProvider&lt;...&gt;.DomainTypes.Row.Date: DateTime</div>
<div class="tip" id="fstip31">type Chart =<br />&#160;&#160;static member Area : data:IEnumerable&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; GenericChart<br />&#160;&#160;static member Bar : data:IEnumerable&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; GenericChart<br />&#160;&#160;static member BoxPlot : data:seq&lt;#IConvertible * #IConvertible * #IConvertible * #IConvertible * #IConvertible * #IConvertible&gt; * ?Name:string * ?Title:string * ?Labels:&#39;a6 * ?Color:Color * ?XTitle:string * ?YTitle:string * ?Percentile:int * ?ShowAverage:bool * ?ShowMedian:bool * ?ShowUnusualValues:bool * ?WhiskerPercentile:int -&gt; GenericChart<br />&#160;&#160;static member BoxPlot : data:seq&lt;IConvertible * #seq&lt;&#39;a1&gt;&gt; * ?Name:string * ?Title:string * ?Labels:&#39;a2 * ?Color:Color * ?XTitle:string * ?YTitle:string * ?Percentile:int * ?ShowAverage:bool * ?ShowMedian:bool * ?ShowUnusualValues:bool * ?WhiskerPercentile:int -&gt; GenericChart (requires &#39;a1 :&gt; IConvertible)<br />&#160;&#160;static member Bubble : data:IEnumerable&lt;#IConvertible * #IConvertible * #IConvertible&gt; * ?Name:string * ?Title:string * ?Labels:#IEnumerable&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string * ?BubbleMaxSize:int * ?BubbleMinSize:int * ?BubbleScaleMax:float * ?BubbleScaleMin:float * ?UseSizeForLabel:bool -&gt; GenericChart<br />&#160;&#160;static member Candlestick : data:IEnumerable&lt;#IConvertible * #IConvertible * #IConvertible * #IConvertible * #IConvertible&gt; * ?Name:string * ?Title:string * ?Labels:#IEnumerable&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; CandlestickChart<br />&#160;&#160;static member Column : data:IEnumerable&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; GenericChart<br />&#160;&#160;static member Columns : charts:seq&lt;GenericChart&gt; -&gt; GenericChart<br />&#160;&#160;static member Combine : charts:seq&lt;GenericChart&gt; -&gt; GenericChart<br />&#160;&#160;static member internal ConfigureBoxPlot : c:GenericChart * vPercentile:int option * vShowAverage:bool option * vShowMedian:bool option * vShowUnusualValues:bool option * vWhiskerPercentile:int option -&gt; unit<br />&#160;&#160;...<br /><br />Full name: Samples.FSharp.Charting.Chart<br /><em><br /><br />&#160;Provides a set of static methods for creating charts.</em></div>
<div class="tip" id="fstip32">static member Chart.FastLine : data:Collections.Generic.IEnumerable&lt;#IConvertible * #IConvertible&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Drawing.Color * ?XTitle:string * ?YTitle:string -&gt; ChartTypes.GenericChart<br /><em><br /><br />&#160;&lt;summary&gt;<br />&#160;A variation of the Line chart that significantly reduces the<br />&#160;drawing time of a series that contains a very large<br />&#160;number of data points.<br />&#160;&lt;/summary&gt;<br />&#160;&lt;param name=&quot;data&quot;&gt;The data for the chart.&lt;/param&gt;<br />&#160;&lt;param name=&quot;Name&quot;&gt;The name of the data set.&lt;/param&gt;<br />&#160;&lt;param name=&quot;Title&quot;&gt;The title of the chart.&lt;/param&gt;<br />&#160;&lt;param name=&quot;Labels&quot;&gt;The labels that match the data.&lt;/param&gt;<br />&#160;&lt;param name=&quot;Color&quot;&gt;The color for the data.&lt;/param&gt;<br />&#160;&lt;param name=&quot;XTitle&quot;&gt;The title of the X-axis.&lt;/param&gt;<br />&#160;&lt;param name=&quot;YTitle&quot;&gt;The title of the Y-axis.&lt;/param&gt;</em></div>
<div class="tip" id="fstip33">val recent : (DateTime * decimal * decimal * decimal * decimal) list<br /><br />Full name: CsvProvider.recent</div>
<div class="tip" id="fstip34">Multiple items<br />type DateTime =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : ticks:int64 -&gt; DateTime + 10 overloads<br />&#160;&#160;&#160;&#160;member Add : value:TimeSpan -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddDays : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddHours : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMilliseconds : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMinutes : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMonths : months:int -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddSeconds : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddTicks : value:int64 -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddYears : value:int -&gt; DateTime<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.DateTime<br /><br />--------------------<br />DateTime()<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, calendar: Globalization.Calendar) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, calendar: Globalization.Calendar) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="tip" id="fstip35">property DateTime.Now: DateTime</div>
<div class="tip" id="fstip36">DateTime.AddDays(value: float) : DateTime</div>
<div class="tip" id="fstip37">static member Chart.Candlestick : data:Collections.Generic.IEnumerable&lt;#IConvertible * #IConvertible * #IConvertible * #IConvertible * #IConvertible&gt; * ?Name:string * ?Title:string * ?Labels:#Collections.Generic.IEnumerable&lt;string&gt; * ?Color:Drawing.Color * ?XTitle:string * ?YTitle:string -&gt; ChartTypes.CandlestickChart<br /><em><br /><br />&#160;&lt;summary&gt;<br />&#160;Used to display stock information using high, low, open and<br />&#160;close values.<br />&#160;&lt;/summary&gt;<br />&#160;&lt;param name=&quot;data&quot;&gt;The data for the chart.&lt;/param&gt;<br />&#160;&lt;param name=&quot;Name&quot;&gt;The name of the data set.&lt;/param&gt;<br />&#160;&lt;param name=&quot;Title&quot;&gt;The title of the chart.&lt;/param&gt;<br />&#160;&lt;param name=&quot;Labels&quot;&gt;The labels that match the data.&lt;/param&gt;<br />&#160;&lt;param name=&quot;Color&quot;&gt;The color for the data.&lt;/param&gt;<br />&#160;&lt;param name=&quot;XTitle&quot;&gt;The title of the X-axis.&lt;/param&gt;<br />&#160;&lt;param name=&quot;YTitle&quot;&gt;The title of the Y-axis.&lt;/param&gt;</em></div>
<div class="tip" id="fstip38">namespace Microsoft</div>
<div class="tip" id="fstip39">namespace Microsoft.FSharp</div>
<div class="tip" id="fstip40">namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fstip41">namespace Microsoft.FSharp.Data.UnitSystems</div>
<div class="tip" id="fstip42">namespace Microsoft.FSharp.Data.UnitSystems.SI</div>
<div class="tip" id="fstip43">namespace Microsoft.FSharp.Data.UnitSystems.SI.UnitNames</div>
<div class="tip" id="fstip44">type Test = CsvProvider&lt;...&gt;<br /><br />Full name: CsvProvider.Test</div>
<div class="tip" id="fstip45">val file : string<br /><br />Full name: CsvProvider.file</div>
<div class="tip" id="fstip46">type Path =<br />&#160;&#160;static val DirectorySeparatorChar : char<br />&#160;&#160;static val AltDirectorySeparatorChar : char<br />&#160;&#160;static val VolumeSeparatorChar : char<br />&#160;&#160;static val InvalidPathChars : char[]<br />&#160;&#160;static val PathSeparator : char<br />&#160;&#160;static member ChangeExtension : path:string * extension:string -&gt; string<br />&#160;&#160;static member Combine : params paths:string[] -&gt; string + 3 overloads<br />&#160;&#160;static member GetDirectoryName : path:string -&gt; string<br />&#160;&#160;static member GetExtension : path:string -&gt; string<br />&#160;&#160;static member GetFileName : path:string -&gt; string<br />&#160;&#160;...<br /><br />Full name: System.IO.Path</div>
<div class="tip" id="fstip47">Path.Combine(params paths: string []) : string<br />Path.Combine(path1: string, path2: string) : string<br />Path.Combine(path1: string, path2: string, path3: string) : string<br />Path.Combine(path1: string, path2: string, path3: string, path4: string) : string</div>
<div class="tip" id="fstip48">val small : CsvProvider&lt;...&gt;<br /><br />Full name: CsvProvider.small</div>
<div class="tip" id="fstip49">CsvProvider&lt;...&gt;.Load(path: string) : CsvProvider&lt;...&gt;</div>
<div class="tip" id="fstip50">val speed : decimal&lt;metre/second&gt;</div>
<div class="tip" id="fstip51">property CsvProvider&lt;...&gt;.DomainTypes.Row.Distance: decimal&lt;metre&gt;</div>
<div class="tip" id="fstip52">property CsvProvider&lt;...&gt;.DomainTypes.Row.Time: decimal&lt;second&gt;</div>
<div class="tip" id="fstip53">[&lt;Measure&gt;]<br />type meter = metre<br /><br />Full name: Microsoft.FSharp.Data.UnitSystems.SI.UnitNames.meter</div>
<div class="tip" id="fstip54">[&lt;Measure&gt;]<br />type second<br /><br />Full name: Microsoft.FSharp.Data.UnitSystems.SI.UnitNames.second</div>
<div class="tip" id="fstip55">property CsvProvider&lt;...&gt;.DomainTypes.Row.Name: string</div>

        </div>
        <div class="span3">

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">F# Data Library</li>
            <li><a href="../index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="https://nuget.org/packages/FSharp.Data">Get Library via NuGet</a></li>
            <li><a href="https://github.com/tpetricek/FSharp.Data">Source Code on GitHub</a></li>
            <li><a href="https://github.com/tpetricek/FSharp.Data/blob/master/LICENSE.md">License (Apache 2.0)</a></li>
            
            <li class="nav-header">Documentation</li>
            <li><a href="FSharpData.html">F# Data Library</a></li>
            <li class="divider"></li>
            <li><a href="JsonProvider.html">F# Data: JSON Type Provider</a></li>
            <li><a href="XmlProvider.html">F# Data: XML Type Provider</a></li>
            <li><a href="CsvProvider.html">F# Data: CSV Type Provider</a></li>
            <li><a href="WorldBank.html">F# Data: WorldBank Provider</a></li>
            <li class="divider"></li>
            <li><a href="JsonValue.html">F# Data: JSON Parser and Reader</a></li>
            <li><a href="Http.html">F# Data: HTTP Utilities</a></li>
          </ul>

        </div>
      </div>
    </div>
    <a href="https://github.com/tpetricek/FSharp.Data"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
  </body>
  </html>