<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>F# Data: XML Type Provider</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The F# Data library implements type providers for working with structured file formats (CSV, JSON and XML) and for accessing the WorldBank data. It also includes helpers for other data-related tasks.">
    <meta name="author" content="Tomas Petricek">

    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script src="content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/tpetricek/FSharp.Data">github page</a></li>
          <li><a href="http://fsharp.github.com/fsharpx/">fsharpx library</a></li>
        </ul>
        <h3 class="muted">F# Data Library</h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <h1>F# Data: XML Type Provider</h1>

<p>This article demonstrates how to use the XML type provider to access XML documents
in a statically typed way. We first look how the structure is infered and then 
demonstrate the provider by parsing RSS feed.</p>

<p>The XML type provider provides a statically typed access to XML documents.
It takes a sample document as an input (or document containing a root XML node with
multiple child nodes that are used as samples). The generated type can then be used 
to read files with the same structure. If the loaded file does not match the structure 
of the sample, an exception may occur (but only when accessing e.g. non-existing element).</p>

<h2>Introducing the provider</h2>

<p>The type provider is located in the <code>FSharp.Data.dll</code> assembly. Assuming the assembly 
is located in the <code>../bin</code> directory, we can load it in F# Interactive as follows:
(note we also need a reference to <code>System.Xml.Linq</code>, because the provider uses the
<code>XDocument</code> type under the cover):</p>
<pre class="fssnip">
<span class="l">1: </span><span class="prep">#r</span> <span class="s">&quot;</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">bin</span><span class="s">/</span><span class="s">FSharp</span><span class="s">.</span><span class="s">Data</span><span class="s">.</span><span class="s">dll</span><span class="s">&quot;</span>
<span class="l">2: </span><span class="prep">#r</span> <span class="s">&quot;</span><span class="s">System</span><span class="s">.</span><span class="s">Xml</span><span class="s">.</span><span class="s">Linq</span><span class="s">.</span><span class="s">dll</span><span class="s">&quot;</span>
<span class="l">3: </span><span class="k">open</span> <span onmouseout="hideTip(event, 'fstip1', 1)" onmouseover="showTip(event, 'fstip1', 1)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip2', 2)" onmouseover="showTip(event, 'fstip2', 2)" class="i">IO</span>
<span class="l">4: </span><span class="k">open</span> <span onmouseout="hideTip(event, 'fstip3', 3)" onmouseover="showTip(event, 'fstip3', 3)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip4', 4)" onmouseover="showTip(event, 'fstip4', 4)" class="i">Data</span></pre>
<h3>Inferring type from sample</h3>

<p>The <code>XmlProvider&lt;...&gt;</code> takes one static parameter of type <code>string</code>. The parameter can 
be <em>either</em> a sample XML string <em>or</em> a sample file (relatively to the current folder or online 
accessible via <code>http</code> or <code>https</code>). It is not likely that this could lead to ambiguities.</p>

<p>The following sample generates a type that can read simple XML documents with a root node
containing a two attributes:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">type</span> <span onmouseout="hideTip(event, 'fstip5', 5)" onmouseover="showTip(event, 'fstip5', 5)" class="i">Author</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip6', 6)" onmouseover="showTip(event, 'fstip6', 6)" class="i">XmlProvider</span><span class="o">&lt;</span><span class="s">&quot;&quot;&quot;</span><span class="s">&lt;</span><span class="s">author</span><span class="s"> </span><span class="s">name</span><span class="s">=</span><span class="s">&quot;</span><span class="s">Paul</span><span class="s"> </span><span class="s">Feyerabend</span><span class="s">&quot;</span><span class="s"> </span><span class="s">born</span><span class="s">=</span><span class="s">&quot;</span><span class="s">1924</span><span class="s">&quot;</span><span class="s"> </span><span class="s">/</span><span class="s">&gt;</span><span class="s">&quot;&quot;&quot;</span><span class="o">&gt;</span>
<span class="l">2: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip7', 7)" onmouseover="showTip(event, 'fstip7', 7)" class="i">sample</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip5', 8)" onmouseover="showTip(event, 'fstip5', 8)" class="i">Author</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip8', 9)" onmouseover="showTip(event, 'fstip8', 9)" class="i">Parse</span>(<span class="s">&quot;&quot;&quot;</span><span class="s">&lt;</span><span class="s">author</span><span class="s"> </span><span class="s">name</span><span class="s">=</span><span class="s">&quot;</span><span class="s">Karl</span><span class="s"> </span><span class="s">Popper</span><span class="s">&quot;</span><span class="s"> </span><span class="s">born</span><span class="s">=</span><span class="s">&quot;</span><span class="s">1902</span><span class="s">&quot;</span><span class="s"> </span><span class="s">/</span><span class="s">&gt;</span><span class="s">&quot;&quot;&quot;</span>)
<span class="l">3: </span>
<span class="l">4: </span><span onmouseout="hideTip(event, 'fstip9', 10)" onmouseover="showTip(event, 'fstip9', 10)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">s</span><span class="s"> </span><span class="s">(</span><span class="s">%</span><span class="s">d</span><span class="s">)</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip7', 11)" onmouseover="showTip(event, 'fstip7', 11)" class="i">sample</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip10', 12)" onmouseover="showTip(event, 'fstip10', 12)" class="i">Name</span> <span onmouseout="hideTip(event, 'fstip7', 13)" onmouseover="showTip(event, 'fstip7', 13)" class="i">sample</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip11', 14)" onmouseover="showTip(event, 'fstip11', 14)" class="i">Born</span></pre>
<p>The type provider generates a type <code>Author</code> that has properties corresponding to the
attributes of the root element of the XML document. The types of the properties are 
infered based on the values in the sample document. In this case, the <code>Name</code> property
has a type <code>string</code> and <code>Born</code> is <code>int</code>.</p>

<p>XML is quite flexible format, so we could represent the same document differently.
Instead of using attributes, we could use nested nodes (<code>&lt;name&gt;</code> and <code>&lt;born&gt;</code> nested
under <code>&lt;author&gt;</code>) that directly contain the values:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">type</span> <span onmouseout="hideTip(event, 'fstip12', 15)" onmouseover="showTip(event, 'fstip12', 15)" class="i">AuthorAlt</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip6', 16)" onmouseover="showTip(event, 'fstip6', 16)" class="i">XmlProvider</span><span class="o">&lt;</span><span class="s">&quot;</span><span class="s">&lt;</span><span class="s">author</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">name</span><span class="s">&gt;</span><span class="s">Karl</span><span class="s"> </span><span class="s">Popper</span><span class="s">&lt;</span><span class="s">/</span><span class="s">name</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">born</span><span class="s">&gt;</span><span class="s">1902</span><span class="s">&lt;</span><span class="s">/</span><span class="s">born</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">/</span><span class="s">author</span><span class="s">&gt;</span><span class="s">&quot;</span><span class="o">&gt;</span>
<span class="l">2: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip13', 17)" onmouseover="showTip(event, 'fstip13', 17)" class="i">doc</span> <span class="o">=</span> <span class="s">&quot;</span><span class="s">&lt;</span><span class="s">author</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">name</span><span class="s">&gt;</span><span class="s">Paul</span><span class="s"> </span><span class="s">Feyerabend</span><span class="s">&lt;</span><span class="s">/</span><span class="s">name</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">born</span><span class="s">&gt;</span><span class="s">1924</span><span class="s">&lt;</span><span class="s">/</span><span class="s">born</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">/</span><span class="s">author</span><span class="s">&gt;</span><span class="s">&quot;</span>
<span class="l">3: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip14', 18)" onmouseover="showTip(event, 'fstip14', 18)" class="i">sampleAlt</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip12', 19)" onmouseover="showTip(event, 'fstip12', 19)" class="i">AuthorAlt</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip8', 20)" onmouseover="showTip(event, 'fstip8', 20)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fstip13', 21)" onmouseover="showTip(event, 'fstip13', 21)" class="i">doc</span>)
<span class="l">4: </span>
<span class="l">5: </span><span onmouseout="hideTip(event, 'fstip9', 22)" onmouseover="showTip(event, 'fstip9', 22)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">s</span><span class="s"> </span><span class="s">(</span><span class="s">%</span><span class="s">d</span><span class="s">)</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip14', 23)" onmouseover="showTip(event, 'fstip14', 23)" class="i">sampleAlt</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip10', 24)" onmouseover="showTip(event, 'fstip10', 24)" class="i">Name</span> <span onmouseout="hideTip(event, 'fstip14', 25)" onmouseover="showTip(event, 'fstip14', 25)" class="i">sampleAlt</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip11', 26)" onmouseover="showTip(event, 'fstip11', 26)" class="i">Born</span></pre>
<p>The generated type provides exactly the same API for reading documents following this
convention (Note that you cannot use <code>AuthorAlt</code> to parse samples that use the
first style - the implementation of the types differs, they just provide the same public API.)</p>

<p>The provider turns a node into a simply typed property only when the node contains just
a primitive value and has no children or attributes.</p>

<h3>Types for more complex structure</h3>

<p>Let's now look at a number of exmaples that have more interesting structrue. First of 
all, what if a node contains some value, but also has some attributes?</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">type</span> <span onmouseout="hideTip(event, 'fstip15', 27)" onmouseover="showTip(event, 'fstip15', 27)" class="i">Detailed</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip6', 28)" onmouseover="showTip(event, 'fstip6', 28)" class="i">XmlProvider</span><span class="o">&lt;</span><span class="s">&quot;&quot;&quot;</span><span class="s">&lt;</span><span class="s">author</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">name</span><span class="s"> </span><span class="s">full</span><span class="s">=</span><span class="s">&quot;</span><span class="s">true</span><span class="s">&quot;</span><span class="s">&gt;</span><span class="s">Karl</span><span class="s"> </span><span class="s">Popper</span><span class="s">&lt;</span><span class="s">/</span><span class="s">name</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">/</span><span class="s">author</span><span class="s">&gt;</span><span class="s">&quot;&quot;&quot;</span><span class="o">&gt;</span>
<span class="l">2: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip16', 29)" onmouseover="showTip(event, 'fstip16', 29)" class="i">info</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip15', 30)" onmouseover="showTip(event, 'fstip15', 30)" class="i">Detailed</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip8', 31)" onmouseover="showTip(event, 'fstip8', 31)" class="i">Parse</span>(<span class="s">&quot;&quot;&quot;</span><span class="s">&lt;</span><span class="s">author</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">name</span><span class="s"> </span><span class="s">full</span><span class="s">=</span><span class="s">&quot;</span><span class="s">false</span><span class="s">&quot;</span><span class="s">&gt;</span><span class="s">Thomas</span><span class="s"> </span><span class="s">Kuhn</span><span class="s">&lt;</span><span class="s">/</span><span class="s">name</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">/</span><span class="s">author</span><span class="s">&gt;</span><span class="s">&quot;&quot;&quot;</span>)
<span class="l">3: </span>
<span class="l">4: </span><span onmouseout="hideTip(event, 'fstip9', 32)" onmouseover="showTip(event, 'fstip9', 32)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">s</span><span class="s"> </span><span class="s">(</span><span class="s">full</span><span class="s">=</span><span class="s">%</span><span class="s">b</span><span class="s">)</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip16', 33)" onmouseover="showTip(event, 'fstip16', 33)" class="i">info</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip17', 34)" onmouseover="showTip(event, 'fstip17', 34)" class="i">Name</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip18', 35)" onmouseover="showTip(event, 'fstip18', 35)" class="i">Value</span> <span onmouseout="hideTip(event, 'fstip16', 36)" onmouseover="showTip(event, 'fstip16', 36)" class="i">info</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip17', 37)" onmouseover="showTip(event, 'fstip17', 37)" class="i">Name</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip19', 38)" onmouseover="showTip(event, 'fstip19', 38)" class="i">Full</span></pre>
<p>If the node cannot be represented as a simple type (like <code>string</code>) then the provider
builds a new type with multiple properties. Here, it generates a property <code>Full</code> 
(based on the name of the attribute) and infers its type to be boolean. Then it
adds property with a (special) name <code>Value</code> that returns the content of the element.</p>

<h3>Types for multiple simple elements</h3>

<p>Another interesting case is when there are multiple nodes that contain just a 
primitive value. The following example shows what happens when the root node
contains multiple <code>&lt;value&gt;</code> nodes (we use the <code>Literal</code> attribtue so that we
do not need to repeat the input string):</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">let</span> [&lt;<span onmouseout="hideTip(event, 'fstip20', 39)" onmouseover="showTip(event, 'fstip20', 39)" class="i">Literal</span>&gt;] <span onmouseout="hideTip(event, 'fstip21', 40)" onmouseover="showTip(event, 'fstip21', 40)" class="i">test</span> <span class="o">=</span> <span class="s">&quot;</span><span class="s">&lt;</span><span class="s">root</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">value</span><span class="s">&gt;</span><span class="s">1</span><span class="s">&lt;</span><span class="s">/</span><span class="s">value</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">value</span><span class="s">&gt;</span><span class="s">3</span><span class="s">&lt;</span><span class="s">/</span><span class="s">value</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">/</span><span class="s">root</span><span class="s">&gt;</span><span class="s">&quot;</span>
<span class="l">2: </span><span class="k">type</span> <span onmouseout="hideTip(event, 'fstip22', 41)" onmouseover="showTip(event, 'fstip22', 41)" class="i">Test</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip6', 42)" onmouseover="showTip(event, 'fstip6', 42)" class="i">XmlProvider</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fstip21', 43)" onmouseover="showTip(event, 'fstip21', 43)" class="i">test</span><span class="o">&gt;</span>
<span class="l">3: </span>
<span class="l">4: </span><span onmouseout="hideTip(event, 'fstip22', 44)" onmouseover="showTip(event, 'fstip22', 44)" class="i">Test</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip23', 45)" onmouseover="showTip(event, 'fstip23', 45)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fstip21', 46)" onmouseover="showTip(event, 'fstip21', 46)" class="i">test</span>)<span class="o">.</span><span class="i">GetValues</span>()
<span class="l">5: </span><span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fstip24', 47)" onmouseover="showTip(event, 'fstip24', 47)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip25', 48)" onmouseover="showTip(event, 'fstip25', 48)" class="i">iter</span> (<span onmouseout="hideTip(event, 'fstip9', 49)" onmouseover="showTip(event, 'fstip9', 49)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">d</span><span class="s">&quot;</span>)</pre>
<p>The type provider generates a method <code>GetValue</code> that returns an array with the
values - as the <code>&lt;value&gt;</code> nodes do not contain any attributes or children, they
are turned into <code>int</code> values and so the <code>GetValues()</code> method returns just <code>int[]</code>!</p>

<h2>Processing philosophers</h2>

<p>The following example demonstrates how the type provider works on a simple 
document that lists authors that write about a specific topic. The following snippet
defines the sampel input (as <code>Literal</code> so that we can pass it to the type provider):</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">let</span> [&lt;<span onmouseout="hideTip(event, 'fstip20', 50)" onmouseover="showTip(event, 'fstip20', 50)" class="i">Literal</span>&gt;] <span onmouseout="hideTip(event, 'fstip26', 51)" onmouseover="showTip(event, 'fstip26', 51)" class="i">authors</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="l">2: </span><span class="s">  </span><span class="s">&lt;</span><span class="s">authors</span><span class="s"> </span><span class="s">topic</span><span class="s">=</span><span class="s">&quot;</span><span class="s">Philosophy</span><span class="s"> </span><span class="s">of</span><span class="s"> </span><span class="s">Science</span><span class="s">&quot;</span><span class="s">&gt;</span>
<span class="l">3: </span><span class="s">    </span><span class="s">&lt;</span><span class="s">author</span><span class="s"> </span><span class="s">name</span><span class="s">=</span><span class="s">&quot;</span><span class="s">Paul</span><span class="s"> </span><span class="s">Feyerabend</span><span class="s">&quot;</span><span class="s"> </span><span class="s">born</span><span class="s">=</span><span class="s">&quot;</span><span class="s">1924</span><span class="s">&quot;</span><span class="s"> </span><span class="s">/</span><span class="s">&gt;</span>
<span class="l">4: </span><span class="s">    </span><span class="s">&lt;</span><span class="s">author</span><span class="s"> </span><span class="s">name</span><span class="s">=</span><span class="s">&quot;</span><span class="s">Thomas</span><span class="s"> </span><span class="s">Kuhn</span><span class="s">&quot;</span><span class="s"> </span><span class="s">/</span><span class="s">&gt;</span>
<span class="l">5: </span><span class="s">  </span><span class="s">&lt;</span><span class="s">/</span><span class="s">authors</span><span class="s">&gt;</span><span class="s"> </span><span class="s">&quot;&quot;&quot;</span></pre>
<p>Note that the <code>born</code> attribute is only available for some of the authors. Using a
type provider, we can print the file input as follows:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">type</span> <span onmouseout="hideTip(event, 'fstip27', 52)" onmouseover="showTip(event, 'fstip27', 52)" class="i">Authors</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip6', 53)" onmouseover="showTip(event, 'fstip6', 53)" class="i">XmlProvider</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fstip26', 54)" onmouseover="showTip(event, 'fstip26', 54)" class="i">authors</span><span class="o">&gt;</span>
<span class="l">2: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip28', 55)" onmouseover="showTip(event, 'fstip28', 55)" class="i">topic</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip27', 56)" onmouseover="showTip(event, 'fstip27', 56)" class="i">Authors</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip29', 57)" onmouseover="showTip(event, 'fstip29', 57)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fstip26', 58)" onmouseover="showTip(event, 'fstip26', 58)" class="i">authors</span>)
<span class="l">3: </span>
<span class="l">4: </span><span onmouseout="hideTip(event, 'fstip9', 59)" onmouseover="showTip(event, 'fstip9', 59)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">s</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip28', 60)" onmouseover="showTip(event, 'fstip28', 60)" class="i">topic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip30', 61)" onmouseover="showTip(event, 'fstip30', 61)" class="i">Topic</span>
<span class="l">5: </span><span class="k">for</span> <span onmouseout="hideTip(event, 'fstip31', 62)" onmouseover="showTip(event, 'fstip31', 62)" class="i">author</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fstip28', 63)" onmouseover="showTip(event, 'fstip28', 63)" class="i">topic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip32', 64)" onmouseover="showTip(event, 'fstip32', 64)" class="i">GetAuthors</span>() <span class="k">do</span>
<span class="l">6: </span>  <span onmouseout="hideTip(event, 'fstip33', 65)" onmouseover="showTip(event, 'fstip33', 65)" class="i">printf</span> <span class="s">&quot;</span><span class="s"> </span><span class="s">-</span><span class="s"> </span><span class="s">%</span><span class="s">s</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip31', 66)" onmouseover="showTip(event, 'fstip31', 66)" class="i">author</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip10', 67)" onmouseover="showTip(event, 'fstip10', 67)" class="i">Name</span> 
<span class="l">7: </span>  <span onmouseout="hideTip(event, 'fstip31', 68)" onmouseover="showTip(event, 'fstip31', 68)" class="i">author</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip34', 69)" onmouseover="showTip(event, 'fstip34', 69)" class="i">Born</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fstip35', 70)" onmouseover="showTip(event, 'fstip35', 70)" class="i">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip36', 71)" onmouseover="showTip(event, 'fstip36', 71)" class="i">iter</span> (<span onmouseout="hideTip(event, 'fstip33', 72)" onmouseover="showTip(event, 'fstip33', 72)" class="i">printf</span> <span class="s">&quot;</span><span class="s"> </span><span class="s">(</span><span class="s">%</span><span class="s">d</span><span class="s">)</span><span class="s">&quot;</span>)
<span class="l">8: </span>  <span onmouseout="hideTip(event, 'fstip9', 73)" onmouseover="showTip(event, 'fstip9', 73)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">&quot;</span></pre>
<p>The value <code>topic</code> has a property <code>Topic</code> (of type <code>string</code>) which returns the value
of the attribute with the same name. It also has a method <code>GetAuthors()</code> that returns
a collection with all the authors. The <code>Born</code> property is missing for some authors,
so it becomes <code>option&lt;int&gt;</code> and we need to print it using <code>Option.iter</code>.</p>

<h2>Reading RSS feeds</h2>

<p>To conclude this introduction with a more interesting example, let's look how to parse a
RSS feed. As discussed earlier, we can use relative paths or web addresses when calling
the type provider:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">type</span> <span onmouseout="hideTip(event, 'fstip37', 74)" onmouseover="showTip(event, 'fstip37', 74)" class="i">Rss</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip6', 75)" onmouseover="showTip(event, 'fstip6', 75)" class="i">XmlProvider</span><span class="o">&lt;</span><span class="s">&quot;</span><span class="s">http</span><span class="s">:</span><span class="s">/</span><span class="s">/</span><span class="s">tomasp</span><span class="s">.</span><span class="s">net</span><span class="s">/</span><span class="s">blog</span><span class="s">/</span><span class="s">rss</span><span class="s">.</span><span class="s">aspx</span><span class="s">&quot;</span><span class="o">&gt;</span></pre>
<p>This code builds a type <code>Rss</code> that represents RSS feed (with the features that are used
on <code>http://tomasp.net</code>). The type <code>Rss</code> provides static methods <code>Parse</code> and <code>Load</code>
to construct it - here, we need to use <code>Parse</code> again, because <code>Load</code> only works for 
files:</p>
<pre class="fssnip">
<span class="l">1: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip38', 76)" onmouseover="showTip(event, 'fstip38', 76)" class="i">wc</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fstip1', 77)" onmouseover="showTip(event, 'fstip1', 77)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip39', 78)" onmouseover="showTip(event, 'fstip39', 78)" class="i">Net</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip40', 79)" onmouseover="showTip(event, 'fstip40', 79)" class="i">WebClient</span>()
<span class="l">2: </span><span class="k">let</span> <span onmouseout="hideTip(event, 'fstip41', 80)" onmouseover="showTip(event, 'fstip41', 80)" class="i">blog</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fstip37', 81)" onmouseover="showTip(event, 'fstip37', 81)" class="i">Rss</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip42', 82)" onmouseover="showTip(event, 'fstip42', 82)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fstip38', 83)" onmouseover="showTip(event, 'fstip38', 83)" class="i">wc</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip43', 84)" onmouseover="showTip(event, 'fstip43', 84)" class="i">DownloadString</span>(<span class="s">&quot;</span><span class="s">http</span><span class="s">:</span><span class="s">/</span><span class="s">/</span><span class="s">tomasp</span><span class="s">.</span><span class="s">net</span><span class="s">/</span><span class="s">blog</span><span class="s">/</span><span class="s">rss</span><span class="s">.</span><span class="s">aspx</span><span class="s">&quot;</span>))</pre>
<p>Printing the title of the RSS feed together with a list of recent posts is now quite
easy - you can simply type <code>blog</code> followed by <code>.</code> and see what the autocompletion
offers. The code looks like this:</p>
<pre class="fssnip">
<span class="l">1: </span><span onmouseout="hideTip(event, 'fstip9', 85)" onmouseover="showTip(event, 'fstip9', 85)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">s</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip41', 86)" onmouseover="showTip(event, 'fstip41', 86)" class="i">blog</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip44', 87)" onmouseover="showTip(event, 'fstip44', 87)" class="i">Channel</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip45', 88)" onmouseover="showTip(event, 'fstip45', 88)" class="i">Title</span>
<span class="l">2: </span>
<span class="l">3: </span><span class="c">// Get all item nodes and print title with link</span>
<span class="l">4: </span><span class="k">for</span> <span onmouseout="hideTip(event, 'fstip46', 89)" onmouseover="showTip(event, 'fstip46', 89)" class="i">item</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fstip41', 90)" onmouseover="showTip(event, 'fstip41', 90)" class="i">blog</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip44', 91)" onmouseover="showTip(event, 'fstip44', 91)" class="i">Channel</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip47', 92)" onmouseover="showTip(event, 'fstip47', 92)" class="i">GetItems</span>() <span class="k">do</span>
<span class="l">5: </span>  <span onmouseout="hideTip(event, 'fstip9', 93)" onmouseover="showTip(event, 'fstip9', 93)" class="i">printfn</span> <span class="s">&quot;</span><span class="s"> </span><span class="s">-</span><span class="s"> </span><span class="s">%</span><span class="s">s</span><span class="s"> </span><span class="s">(</span><span class="s">%</span><span class="s">s</span><span class="s">)</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fstip46', 94)" onmouseover="showTip(event, 'fstip46', 94)" class="i">item</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip48', 95)" onmouseover="showTip(event, 'fstip48', 95)" class="i">Title</span> <span onmouseout="hideTip(event, 'fstip46', 96)" onmouseover="showTip(event, 'fstip46', 96)" class="i">item</span><span class="o">.</span><span onmouseout="hideTip(event, 'fstip49', 97)" onmouseover="showTip(event, 'fstip49', 97)" class="i">Link</span></pre>
<h2>Related articles</h2>

<ul>
<li><a href="FSharpData.html">F# Data: Type Providers</a> - gives more information about other
type providers in the <code>FSharp.Data</code> package.</li>
</ul>

          <div class="tip" id="fstip1">namespace System</div>
<div class="tip" id="fstip2">namespace System.IO</div>
<div class="tip" id="fstip3">namespace FSharp</div>
<div class="tip" id="fstip4">namespace FSharp.Data</div>
<div class="tip" id="fstip5">type Author = XmlProvider&lt;...&gt;<br /><br />Full name: XmlProvider.Author</div>
<div class="tip" id="fstip6">type XmlProvider<br /><br />Full name: FSharp.Data.XmlProvider</div>
<div class="tip" id="fstip7">val sample : XmlProvider&lt;...&gt;.DomainTypes.Author<br /><br />Full name: XmlProvider.sample</div>
<div class="tip" id="fstip8">XmlProvider&lt;...&gt;.Parse(source: string) : XmlProvider&lt;...&gt;.DomainTypes.Author</div>
<div class="tip" id="fstip9">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fstip10">property XmlProvider&lt;...&gt;.DomainTypes.Author.Name: string</div>
<div class="tip" id="fstip11">property XmlProvider&lt;...&gt;.DomainTypes.Author.Born: int</div>
<div class="tip" id="fstip12">type AuthorAlt = XmlProvider&lt;...&gt;<br /><br />Full name: XmlProvider.AuthorAlt</div>
<div class="tip" id="fstip13">val doc : string<br /><br />Full name: XmlProvider.doc</div>
<div class="tip" id="fstip14">val sampleAlt : XmlProvider&lt;...&gt;.DomainTypes.Author<br /><br />Full name: XmlProvider.sampleAlt</div>
<div class="tip" id="fstip15">type Detailed = XmlProvider&lt;...&gt;<br /><br />Full name: XmlProvider.Detailed</div>
<div class="tip" id="fstip16">val info : XmlProvider&lt;...&gt;.DomainTypes.Author<br /><br />Full name: XmlProvider.info</div>
<div class="tip" id="fstip17">property XmlProvider&lt;...&gt;.DomainTypes.Author.Name: XmlProvider&lt;...&gt;.DomainTypes.Name</div>
<div class="tip" id="fstip18">property XmlProvider&lt;...&gt;.DomainTypes.Name.Value: string</div>
<div class="tip" id="fstip19">property XmlProvider&lt;...&gt;.DomainTypes.Name.Full: bool</div>
<div class="tip" id="fstip20">Multiple items<br />type LiteralAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; LiteralAttribute<br /><br />Full name: Microsoft.FSharp.Core.LiteralAttribute<br /><br />--------------------<br />new : unit -&gt; LiteralAttribute</div>
<div class="tip" id="fstip21">val test : string<br /><br />Full name: XmlProvider.test</div>
<div class="tip" id="fstip22">type Test = XmlProvider&lt;...&gt;<br /><br />Full name: XmlProvider.Test</div>
<div class="tip" id="fstip23">XmlProvider&lt;...&gt;.Parse(source: string) : XmlProvider&lt;...&gt;.DomainTypes.Root</div>
<div class="tip" id="fstip24">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fstip25">val iter : action:(&#39;T -&gt; unit) -&gt; source:seq&lt;&#39;T&gt; -&gt; unit<br /><br />Full name: Microsoft.FSharp.Collections.Seq.iter</div>
<div class="tip" id="fstip26">val authors : string<br /><br />Full name: XmlProvider.authors</div>
<div class="tip" id="fstip27">type Authors = XmlProvider&lt;...&gt;<br /><br />Full name: XmlProvider.Authors</div>
<div class="tip" id="fstip28">val topic : XmlProvider&lt;...&gt;.DomainTypes.Authors<br /><br />Full name: XmlProvider.topic</div>
<div class="tip" id="fstip29">XmlProvider&lt;...&gt;.Parse(source: string) : XmlProvider&lt;...&gt;.DomainTypes.Authors</div>
<div class="tip" id="fstip30">property XmlProvider&lt;...&gt;.DomainTypes.Authors.Topic: string</div>
<div class="tip" id="fstip31">val author : XmlProvider&lt;...&gt;.DomainTypes.Author</div>
<div class="tip" id="fstip32">XmlProvider&lt;...&gt;.DomainTypes.Authors.GetAuthors() : XmlProvider&lt;...&gt;.DomainTypes.Author []</div>
<div class="tip" id="fstip33">val printf : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printf</div>
<div class="tip" id="fstip34">property XmlProvider&lt;...&gt;.DomainTypes.Author.Born: Option&lt;int&gt;</div>
<div class="tip" id="fstip35">module Option<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fstip36">val iter : action:(&#39;T -&gt; unit) -&gt; option:&#39;T option -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Option.iter</div>
<div class="tip" id="fstip37">type Rss = XmlProvider&lt;...&gt;<br /><br />Full name: XmlProvider.Rss</div>
<div class="tip" id="fstip38">val wc : System.Net.WebClient<br /><br />Full name: XmlProvider.wc</div>
<div class="tip" id="fstip39">namespace System.Net</div>
<div class="tip" id="fstip40">Multiple items<br />type WebClient =<br />&#160;&#160;inherit Component<br />&#160;&#160;new : unit -&gt; WebClient<br />&#160;&#160;member AllowReadStreamBuffering : bool with get, set<br />&#160;&#160;member AllowWriteStreamBuffering : bool with get, set<br />&#160;&#160;member BaseAddress : string with get, set<br />&#160;&#160;member CachePolicy : RequestCachePolicy with get, set<br />&#160;&#160;member CancelAsync : unit -&gt; unit<br />&#160;&#160;member Credentials : ICredentials with get, set<br />&#160;&#160;member DownloadData : address:string -&gt; byte[] + 1 overload<br />&#160;&#160;member DownloadDataAsync : address:Uri -&gt; unit + 1 overload<br />&#160;&#160;member DownloadDataTaskAsync : address:string -&gt; Task&lt;byte[]&gt; + 1 overload<br />&#160;&#160;...<br /><br />Full name: System.Net.WebClient<br /><br />--------------------<br />System.Net.WebClient() : unit</div>
<div class="tip" id="fstip41">val blog : XmlProvider&lt;...&gt;.DomainTypes.Rss<br /><br />Full name: XmlProvider.blog</div>
<div class="tip" id="fstip42">XmlProvider&lt;...&gt;.Parse(source: string) : XmlProvider&lt;...&gt;.DomainTypes.Rss</div>
<div class="tip" id="fstip43">System.Net.WebClient.DownloadString(address: System.Uri) : string<br />System.Net.WebClient.DownloadString(address: string) : string</div>
<div class="tip" id="fstip44">property XmlProvider&lt;...&gt;.DomainTypes.Rss.Channel: XmlProvider&lt;...&gt;.DomainTypes.Channel</div>
<div class="tip" id="fstip45">property XmlProvider&lt;...&gt;.DomainTypes.Channel.Title: string</div>
<div class="tip" id="fstip46">val item : XmlProvider&lt;...&gt;.DomainTypes.Item</div>
<div class="tip" id="fstip47">XmlProvider&lt;...&gt;.DomainTypes.Channel.GetItems() : XmlProvider&lt;...&gt;.DomainTypes.Item []</div>
<div class="tip" id="fstip48">property XmlProvider&lt;...&gt;.DomainTypes.Item.Title: string</div>
<div class="tip" id="fstip49">property XmlProvider&lt;...&gt;.DomainTypes.Item.Link: string</div>

        </div>
        <div class="span3">

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">F# Data Library</li>
            <li><a href="../index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="https://nuget.org/packages/FSharp.Data">Get Library via NuGet</a></li>
            <li><a href="https://github.com/tpetricek/FSharp.Data">Source Code on GitHub</a></li>
            <li><a href="https://github.com/tpetricek/FSharp.Data/blob/master/LICENSE.md">License (Apache 2.0)</a></li>
            
            <li class="nav-header">Documentation</li>
            <li><a href="FSharpData.html">F# Data Library</a></li>
            <li class="divider"></li>
            <li><a href="JsonProvider.html">F# Data: JSON Type Provider</a></li>
            <li><a href="XmlProvider.html">F# Data: XML Type Provider</a></li>
            <li><a href="CsvProvider.html">F# Data: CSV Type Provider</a></li>
            <li><a href="WorldBank.html">F# Data: WorldBank Provider</a></li>
            <li class="divider"></li>
            <li><a href="JsonValue.html">F# Data: JSON Parser and Reader</a></li>
            <li><a href="Http.html">F# Data: HTTP Utilities</a></li>
          </ul>

        </div>
      </div>
    </div>
    <a href="https://github.com/tpetricek/FSharp.Data"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
  </body>
  </html>